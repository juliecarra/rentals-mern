{"ast":null,"code":"var _jsxFileName = \"/Users/Julie-Marie-Carra/Desktop/cmu/server/client/src/components/Booking/BookingManage.jsx\";\n// import React, { Component } from \"react\";\n// import { Link } from \"react-router-dom\";\n// import * as moment from \"moment\";\n// import {\n//   fetchUserBookings,\n//   fetchPendingPayments,\n//   confirmPayment,\n//   declinePayment\n// } from \"../../actions\";\n// import { connect } from \"react-redux\";\n// class BookingManage extends Component {\n//   constructor(props) {\n//     super(props);\n//     this.state = {\n//       pendingPayments: []\n//     };\n//     this.handleConfirmPayment = this.handleConfirmPayment.bind(this);\n//     this.onDeclinePayment = this.onDeclinePayment.bind(this);\n//   }\n//   componentDidMount() {\n//     this.props.fetchUserBookings();\n//     // this.props.fetchPendingPayments();\n//     this.getPendingPayments();\n//   }\n//   getPendingPayments() {\n//     this.props\n//       .fetchPendingPayments()\n//       .then(pendingPayments => this.setState({ pendingPayments }))\n//       .catch(error => console.log(error));\n//   }\n//   handleConfirmPayment(payment) {\n//     this.props\n//       .confirmPayment(payment)\n//       .then(status => this.getPendingPayments())\n//       .catch(err => console.log(err));\n//   }\n//   onDeclinePayment(payment) {\n//     this.props.declinePayment(payment);\n//   }\n//   render() {\n//     const { isAuthenticated } = this.props.auth;\n//     const { bookings, isFetching } = this.props;\n//     const { payments } = this.props.payments;\n//     return (\n//       <div>\n//         {isAuthenticated && (\n//           <section id=\"userBookings\">\n//             <h1 className=\"page-title\">My Bookings</h1>\n//             <div className=\"row\">\n//               {bookings.map(booking => (\n//                 <div className=\"col-md-4\">\n//                   <div className=\"card text-center\">\n//                     <div className=\"card-header\">{booking.rental.category}</div>\n//                     <div className=\"card-block\">\n//                       <h4 className=\"card-title\">\n//                         {\" \"}\n//                         {booking.rental.title} - {booking.rental.city}\n//                       </h4>\n//                       <p className=\"card-text booking-desc\">\n//                         {booking.rental.description}\n//                       </p>\n//                       <p className=\"card-text booking-days\">\n//                         {moment(booking.startAt).format(\" MM/DD/YYYY\")} -{\" \"}\n//                         {moment(booking.endAt).format(\"MM/DD/YYYY\")} |{\" \"}\n//                         {booking.days} days\n//                       </p>\n//                       <p className=\"card-text booking-price\">\n//                         <span>Price: </span>{\" \"}\n//                         <span className=\"booking-price-value\">\n//                           {booking.totalPrice} $\n//                         </span>\n//                       </p>\n//                       {booking.rental && (\n//                         <Link\n//                           className=\"btn\"\n//                           to={`/rentals/${booking.rental._id}`}\n//                         >\n//                           Go to Rental\n//                         </Link>\n//                       )}\n//                     </div>\n//                     <div className=\"card-footer text-muted\">\n//                       Created {moment(booking.createdAt).format(\"MM/DD/YYYY\")}\n//                     </div>\n//                   </div>\n//                 </div>\n//               ))}\n//             </div>\n//             {!isFetching && bookings.length === 0 && (\n//               <div class=\"alert alert-warning\">\n//                 You have no bookings created go to rentals section and book your\n//                 place today.\n//                 <Link\n//                   style={{ \"margin-left\": \"10px\" }}\n//                   class=\"btn\"\n//                   to=\"/rentals\"\n//                 >\n//                   Available Rental\n//                 </Link>\n//               </div>\n//             )}\n//           </section>\n//         )}\n//         {payments.length > 0 && isAuthenticated && (\n//           <section id=\"pendingBookings\">\n//             <h1 className=\"page-title\">My Pending Bookings</h1>\n//             <div className=\"row\">\n//               <div className=\"col-md-4\">\n//                 {payments.map(payment => (\n//                   <div className=\"card text-center\">\n//                     <div className=\"card-header\">\n//                       Booking made by: {payment.fromUser.username}\n//                     </div>\n//                     <div className=\"card-block\">\n//                       <p className=\"card-text\">Status: {payment.status}</p>\n//                       <p className=\"card-text booking-price\">\n//                         <span>Price: </span>{\" \"}\n//                         <span className=\"booking-price-value\">\n//                           $ {payment.amount}\n//                         </span>\n//                       </p>\n//                     </div>\n//                   </div>\n//                 ))}\n//                 <div className=\"card-footer text-muted\">\n//                   <button\n//                     className=\"btn btn-success\"\n//                     onClick={this.handleConfirmPayment}\n//                   >\n//                     Accept\n//                   </button>\n//                   <button\n//                     className=\"btn btn-danger\"\n//                     onClick={this.onDeclinePayment}\n//                   >\n//                     Decline\n//                   </button>\n//                 </div>\n//               </div>\n//             </div>\n//             {payments.length === 0 && (\n//               <div class=\"alert alert-warning\">\n//                 You have no payments in progress.\n//                 <Link\n//                   style={{ \"margin-left\": \"10px\" }}\n//                   class=\"btn\"\n//                   to=\"/rentals\"\n//                 >\n//                   Available Rental\n//                 </Link>\n//               </div>\n//             )}\n//           </section>\n//         )}\n//       </div>\n//     );\n//   }\n// }\n// const mapStateToProps = state => ({\n//   auth: state.auth,\n//   bookings: state.bookings.bookings,\n//   payments: state.payments,\n//   errors: state.errors\n// });\n// export default connect(mapStateToProps, {\n//   fetchUserBookings,\n//   fetchPendingPayments,\n//   confirmPayment,\n//   declinePayment\n// })(BookingManage);\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport { BookingCard, PaymentCard } from \"./BookingCard\";\nimport * as actions from \"../../actions\";\n\nclass BookingManage extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      pendingPayments: []\n    };\n\n    this.renderPaymentButtons = payment => {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        onClick: () => this.acceptPayment(payment),\n        className: \"btn btn-success\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249\n        },\n        __self: this\n      }, \"Accept\"), \" \", React.createElement(\"button\", {\n        onClick: () => this.declinePayment(payment),\n        className: \"btn btn-danger\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255\n        },\n        __self: this\n      }, \"Decline\"));\n    };\n  }\n\n  componentDidMount() {\n    this.props.dispatch(actions.fetchUserBookings());\n    this.getPendingPayments();\n  }\n\n  getPendingPayments() {\n    actions.getPendingPayments().then(pendingPayments => this.setState({\n      pendingPayments\n    })).catch(err => console.error(err));\n  }\n\n  acceptPayment(payment) {\n    debugger;\n    actions.acceptPayment(payment).then(status => {\n      this.getPendingPayments();\n    }).catch(err => console.error(err));\n  }\n\n  declinePayment(payment) {\n    actions.declinePayment(payment).then(status => {\n      this.getPendingPayments();\n    }).catch(err => console.error(err));\n  }\n\n  renderBookings(bookings) {\n    return bookings.map((booking, index) => React.createElement(BookingCard, {\n      booking: booking,\n      key: index,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231\n      },\n      __self: this\n    }));\n  }\n\n  renderPayments(payments) {\n    return payments.map((payment, index) => React.createElement(PaymentCard, {\n      booking: payment.booking,\n      payment: payment,\n      paymentBtns: this.renderPaymentButtons,\n      key: index,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237\n      },\n      __self: this\n    }));\n  }\n\n  render() {\n    const {\n      bookings,\n      isFetching\n    } = this.props;\n    const {\n      pendingPayments\n    } = this.state;\n    return React.createElement(React.Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270\n      },\n      __self: this\n    }, React.createElement(\"section\", {\n      id: \"userBookings\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      className: \"page-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 272\n      },\n      __self: this\n    }, \"My Bookings\"), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 273\n      },\n      __self: this\n    }, this.renderBookings(bookings)), !isFetching && bookings.length === 0 && React.createElement(\"div\", {\n      className: \"alert alert-warning\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 275\n      },\n      __self: this\n    }, \"You have no bookings yet. Go to rentals section and book your place today.\", React.createElement(Link, {\n      style: {\n        marginLeft: \"10px\"\n      },\n      className: \"btn \",\n      to: \"/rentals\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 278\n      },\n      __self: this\n    }, \"Available Rental\"))), React.createElement(\"section\", {\n      id: \"pendingBookings\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 288\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      className: \"page-title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 289\n      },\n      __self: this\n    }, \"My Pending Bookings\"), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 290\n      },\n      __self: this\n    }, this.renderPayments(pendingPayments)), !isFetching && pendingPayments.length === 0 && React.createElement(\"div\", {\n      className: \"alert alert-warning\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 292\n      },\n      __self: this\n    }, \"You have no pending bookings currently...\")));\n  }\n\n}\n\nfunction mapStateToProps(state) {\n  return {\n    bookings: state.bookings.bookings\n  };\n}\n\nexport default connect(mapStateToProps)(BookingManage);","map":{"version":3,"sources":["/Users/Julie-Marie-Carra/Desktop/cmu/server/client/src/components/Booking/BookingManage.jsx"],"names":["React","connect","Link","BookingCard","PaymentCard","actions","BookingManage","Component","state","pendingPayments","renderPaymentButtons","payment","acceptPayment","declinePayment","componentDidMount","props","dispatch","fetchUserBookings","getPendingPayments","then","setState","catch","err","console","error","status","renderBookings","bookings","map","booking","index","renderPayments","payments","render","isFetching","length","marginLeft","mapStateToProps"],"mappings":";AAAA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,eAAzC;AAEA,OAAO,KAAKC,OAAZ,MAAyB,eAAzB;;AAEA,MAAMC,aAAN,SAA4BN,KAAK,CAACO,SAAlC,CAA4C;AAAA;AAAA;AAAA,SAC1CC,KAD0C,GAClC;AACNC,MAAAA,eAAe,EAAE;AADX,KADkC;;AAAA,SAqD1CC,oBArD0C,GAqDnBC,OAAO,IAAI;AAChC,aACE;AAAA;AAAA;AAAA;AAAA;AAAA;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","sourcesContent":["// import React, { Component } from \"react\";\n// import { Link } from \"react-router-dom\";\n// import * as moment from \"moment\";\n\n// import {\n//   fetchUserBookings,\n//   fetchPendingPayments,\n//   confirmPayment,\n//   declinePayment\n// } from \"../../actions\";\n\n// import { connect } from \"react-redux\";\n\n// class BookingManage extends Component {\n//   constructor(props) {\n//     super(props);\n\n//     this.state = {\n//       pendingPayments: []\n//     };\n//     this.handleConfirmPayment = this.handleConfirmPayment.bind(this);\n//     this.onDeclinePayment = this.onDeclinePayment.bind(this);\n//   }\n\n//   componentDidMount() {\n//     this.props.fetchUserBookings();\n//     // this.props.fetchPendingPayments();\n//     this.getPendingPayments();\n//   }\n\n//   getPendingPayments() {\n//     this.props\n//       .fetchPendingPayments()\n//       .then(pendingPayments => this.setState({ pendingPayments }))\n//       .catch(error => console.log(error));\n//   }\n\n//   handleConfirmPayment(payment) {\n//     this.props\n//       .confirmPayment(payment)\n//       .then(status => this.getPendingPayments())\n//       .catch(err => console.log(err));\n//   }\n\n//   onDeclinePayment(payment) {\n//     this.props.declinePayment(payment);\n//   }\n\n//   render() {\n//     const { isAuthenticated } = this.props.auth;\n//     const { bookings, isFetching } = this.props;\n//     const { payments } = this.props.payments;\n\n//     return (\n//       <div>\n//         {isAuthenticated && (\n//           <section id=\"userBookings\">\n//             <h1 className=\"page-title\">My Bookings</h1>\n//             <div className=\"row\">\n//               {bookings.map(booking => (\n//                 <div className=\"col-md-4\">\n//                   <div className=\"card text-center\">\n//                     <div className=\"card-header\">{booking.rental.category}</div>\n//                     <div className=\"card-block\">\n//                       <h4 className=\"card-title\">\n//                         {\" \"}\n//                         {booking.rental.title} - {booking.rental.city}\n//                       </h4>\n//                       <p className=\"card-text booking-desc\">\n//                         {booking.rental.description}\n//                       </p>\n//                       <p className=\"card-text booking-days\">\n//                         {moment(booking.startAt).format(\" MM/DD/YYYY\")} -{\" \"}\n//                         {moment(booking.endAt).format(\"MM/DD/YYYY\")} |{\" \"}\n//                         {booking.days} days\n//                       </p>\n//                       <p className=\"card-text booking-price\">\n//                         <span>Price: </span>{\" \"}\n//                         <span className=\"booking-price-value\">\n//                           {booking.totalPrice} $\n//                         </span>\n//                       </p>\n//                       {booking.rental && (\n//                         <Link\n//                           className=\"btn\"\n//                           to={`/rentals/${booking.rental._id}`}\n//                         >\n//                           Go to Rental\n//                         </Link>\n//                       )}\n//                     </div>\n//                     <div className=\"card-footer text-muted\">\n//                       Created {moment(booking.createdAt).format(\"MM/DD/YYYY\")}\n//                     </div>\n//                   </div>\n//                 </div>\n//               ))}\n//             </div>\n//             {!isFetching && bookings.length === 0 && (\n//               <div class=\"alert alert-warning\">\n//                 You have no bookings created go to rentals section and book your\n//                 place today.\n//                 <Link\n//                   style={{ \"margin-left\": \"10px\" }}\n//                   class=\"btn\"\n//                   to=\"/rentals\"\n//                 >\n//                   Available Rental\n//                 </Link>\n//               </div>\n//             )}\n//           </section>\n//         )}\n//         {payments.length > 0 && isAuthenticated && (\n//           <section id=\"pendingBookings\">\n//             <h1 className=\"page-title\">My Pending Bookings</h1>\n//             <div className=\"row\">\n//               <div className=\"col-md-4\">\n//                 {payments.map(payment => (\n//                   <div className=\"card text-center\">\n//                     <div className=\"card-header\">\n//                       Booking made by: {payment.fromUser.username}\n//                     </div>\n//                     <div className=\"card-block\">\n//                       <p className=\"card-text\">Status: {payment.status}</p>\n\n//                       <p className=\"card-text booking-price\">\n//                         <span>Price: </span>{\" \"}\n//                         <span className=\"booking-price-value\">\n//                           $ {payment.amount}\n//                         </span>\n//                       </p>\n//                     </div>\n//                   </div>\n//                 ))}\n//                 <div className=\"card-footer text-muted\">\n//                   <button\n//                     className=\"btn btn-success\"\n//                     onClick={this.handleConfirmPayment}\n//                   >\n//                     Accept\n//                   </button>\n//                   <button\n//                     className=\"btn btn-danger\"\n//                     onClick={this.onDeclinePayment}\n//                   >\n//                     Decline\n//                   </button>\n//                 </div>\n//               </div>\n//             </div>\n\n//             {payments.length === 0 && (\n//               <div class=\"alert alert-warning\">\n//                 You have no payments in progress.\n//                 <Link\n//                   style={{ \"margin-left\": \"10px\" }}\n//                   class=\"btn\"\n//                   to=\"/rentals\"\n//                 >\n//                   Available Rental\n//                 </Link>\n//               </div>\n//             )}\n//           </section>\n//         )}\n//       </div>\n//     );\n//   }\n// }\n\n// const mapStateToProps = state => ({\n//   auth: state.auth,\n//   bookings: state.bookings.bookings,\n//   payments: state.payments,\n//   errors: state.errors\n// });\n\n// export default connect(mapStateToProps, {\n//   fetchUserBookings,\n//   fetchPendingPayments,\n//   confirmPayment,\n//   declinePayment\n// })(BookingManage);\n\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport { BookingCard, PaymentCard } from \"./BookingCard\";\n\nimport * as actions from \"../../actions\";\n\nclass BookingManage extends React.Component {\n  state = {\n    pendingPayments: []\n  };\n\n  componentDidMount() {\n    this.props.dispatch(actions.fetchUserBookings());\n    this.getPendingPayments();\n  }\n\n  getPendingPayments() {\n    actions\n      .getPendingPayments()\n      .then(pendingPayments => this.setState({ pendingPayments }))\n      .catch(err => console.error(err));\n  }\n\n  acceptPayment(payment) {\n    debugger;\n    actions\n      .acceptPayment(payment)\n      .then(status => {\n        this.getPendingPayments();\n      })\n      .catch(err => console.error(err));\n  }\n\n  declinePayment(payment) {\n    actions\n      .declinePayment(payment)\n      .then(status => {\n        this.getPendingPayments();\n      })\n      .catch(err => console.error(err));\n  }\n\n  renderBookings(bookings) {\n    return bookings.map((booking, index) => (\n      <BookingCard booking={booking} key={index} />\n    ));\n  }\n\n  renderPayments(payments) {\n    return payments.map((payment, index) => (\n      <PaymentCard\n        booking={payment.booking}\n        payment={payment}\n        paymentBtns={this.renderPaymentButtons}\n        key={index}\n      />\n    ));\n  }\n\n  renderPaymentButtons = payment => {\n    return (\n      <div>\n        <button\n          onClick={() => this.acceptPayment(payment)}\n          className=\"btn btn-success\"\n        >\n          Accept\n        </button>{\" \"}\n        <button\n          onClick={() => this.declinePayment(payment)}\n          className=\"btn btn-danger\"\n        >\n          Decline\n        </button>\n      </div>\n    );\n  };\n\n  render() {\n    const { bookings, isFetching } = this.props;\n    const { pendingPayments } = this.state;\n\n    return (\n      <React.Fragment>\n        <section id=\"userBookings\">\n          <h1 className=\"page-title\">My Bookings</h1>\n          <div className=\"row\">{this.renderBookings(bookings)}</div>\n          {!isFetching && bookings.length === 0 && (\n            <div className=\"alert alert-warning\">\n              You have no bookings yet. Go to rentals section and book your\n              place today.\n              <Link\n                style={{ marginLeft: \"10px\" }}\n                className=\"btn \"\n                to=\"/rentals\"\n              >\n                Available Rental\n              </Link>\n            </div>\n          )}\n        </section>\n        <section id=\"pendingBookings\">\n          <h1 className=\"page-title\">My Pending Bookings</h1>\n          <div className=\"row\">{this.renderPayments(pendingPayments)}</div>\n          {!isFetching && pendingPayments.length === 0 && (\n            <div className=\"alert alert-warning\">\n              You have no pending bookings currently...\n            </div>\n          )}\n        </section>\n      </React.Fragment>\n    );\n  }\n}\n\nfunction mapStateToProps(state) {\n  return {\n    bookings: state.bookings.bookings\n  };\n}\n\nexport default connect(mapStateToProps)(BookingManage);\n"]},"metadata":{},"sourceType":"module"}